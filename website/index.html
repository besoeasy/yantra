<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yantr — The Open Source Homelab Control Plane</title>
    <meta
      name="description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta name="theme-color" content="#ffffff" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yantr.org/" />
    <meta property="og:title" content="Yantr — The Open Source Homelab Control Plane" />
    <meta
      property="og:description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta property="og:image" content="https://yantr.org/yantr.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://yantr.org/" />
    <meta property="twitter:title" content="Yantr — The Open Source Homelab Control Plane" />
    <meta
      property="twitter:description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta property="twitter:image" content="https://yantr.org/yantr.png" />

    <!-- Local Tailwind CSS bundle -->
    <link rel="stylesheet" href="./tailwind.css" />
    <style>
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .bg-grid-pattern {
        background-color: #ffffff;
        background-image: linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px);
        background-size: 20px 20px;
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.5);
      }
      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.1;
          transform: scale(0.8);
        }
        50% {
          opacity: 0.4;
          transform: scale(1.1);
        }
      }
      .star-icon {
        position: absolute;
        animation: twinkle 4s infinite ease-in-out;
        opacity: 0.1;
        filter: grayscale(100%);
        transition: all 0.3s;
        pointer-events: auto; /* Enable hover */
      }
      .star-icon:hover {
        opacity: 1 !important;
        filter: grayscale(0%);
        transform: scale(1.1) !important; /* Temporarily pause animation or override transform */
        z-index: 20;
        animation-play-state: paused;
        background: rgba(255, 255, 255, 0.9);
        box-shadow:
          0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-up {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0; /* Start hidden */
      }
      .delay-100 {
        animation-delay: 100ms;
      }
      .delay-200 {
        animation-delay: 200ms;
      }
      .delay-300 {
        animation-delay: 300ms;
      }
      @keyframes slideInSoft {
        from {
          opacity: 0;
          transform: translateY(14px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes pulseGlow {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.06);
        }
        50% {
          box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
        }
      }
      @keyframes floatY {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-4px);
        }
      }
      .animate-slide-in-soft {
        animation: slideInSoft 700ms ease-out forwards;
      }
      .animate-pulse-glow {
        animation: pulseGlow 2.6s ease-in-out infinite;
      }
      .animate-float-y {
        animation: floatY 3.2s ease-in-out infinite;
      }
    </style>
  </head>
  <body class="bg-white text-black font-mono antialiased selection:bg-black selection:text-white relative">
    <div class="absolute inset-0 -z-10 bg-grid-pattern [mask-image:linear-gradient(to_bottom,white,transparent)] h-[900px] pointer-events-none"></div>

    <!-- Full-page Background Animation Container -->
    <div id="hero-stars" class="absolute top-0 left-0 w-full overflow-hidden -z-10 pointer-events-none" style="height: 100%"></div>

    <!-- Header -->
    <header class="sticky top-0 z-50 glass-effect border-b border-gray-100/50">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
        <div class="flex items-center gap-8">
          <a href="#" class="text-xl font-bold tracking-tight bg-black text-white px-2 py-1">YANTR</a>
          <nav class="hidden md:flex items-center gap-6 text-sm font-medium text-gray-600">
            <a href="#features" class="hover:text-black transition-colors">Features</a>
            <a href="#apps" class="hover:text-black transition-colors">Apps</a>
          </nav>
        </div>
        <div class="flex items-center gap-3">
          <!-- Mobile: compact GitHub button -->
          <a
            href="https://github.com/besoeasy/yantr"
            target="_blank"
            class="sm:hidden flex items-center gap-1.5 bg-black text-white px-3 py-2 text-sm font-bold hover:bg-gray-800 transition-colors"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill-rule="evenodd"
                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                clip-rule="evenodd"
              />
            </svg>
            GitHub
          </a>
          <a
            href="https://t.me/+h4RvCk63PxUyODQ1"
            target="_blank"
            class="hidden sm:flex items-center gap-2 border border-gray-200 text-gray-700 px-4 py-2 text-sm font-bold hover:bg-gray-50 transition-colors"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"
              />
            </svg>
            Telegram
          </a>
          <a
            href="https://github.com/besoeasy/yantr"
            target="_blank"
            class="hidden sm:flex items-center gap-2 bg-black text-white px-4 py-2 text-sm font-bold hover:bg-gray-800 transition-colors"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill-rule="evenodd"
                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                clip-rule="evenodd"
              />
            </svg>
            Star on GitHub <span class="text-gray-400 font-normal" id="stars-nav"></span>
          </a>
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 pt-16 pb-24 relative bg-white">
      <!-- Hero -->
      <div class="mb-16 sm:mb-32 flex flex-col items-center text-center relative z-10">
        <div class="max-w-4xl mx-auto">
          <div
            class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/80 backdrop-blur px-3 py-1.5 mb-6 text-xs font-semibold tracking-wide text-gray-600 uppercase animate-fade-in-up"
          >
            <span class="h-2 w-2 rounded-full bg-emerald-500 animate-pulse"></span>
            Docker-native self-hosting
          </div>
          <h1
            id="hero-title"
            class="text-3xl sm:text-5xl lg:text-7xl font-bold tracking-tight mb-6 font-sans text-black leading-tight sm:leading-[0.95] transition-opacity duration-500 ease-in-out animate-fade-in-up delay-100"
          >
            Self-host open source apps.
          </h1>
          <p
            id="hero-desc"
            class="text-lg sm:text-xl text-gray-500 leading-relaxed max-w-2xl mx-auto mb-10 font-sans transition-opacity duration-500 ease-in-out animate-fade-in-up delay-200"
          >
            Turn any device into a private cloud with one command. Run 100+ apps like Ollama, Open WebUI, and Perplexica on your own infrastructure. No OS
            replacement needed.
          </p>

          <!-- Install Widget -->
          <div
            class="border border-gray-200 rounded-2xl overflow-hidden shadow-2xl bg-white max-w-2xl mx-auto text-left ring-1 ring-gray-900/5 animate-fade-in-up delay-300"
          >
            <div class="p-5 sm:p-6 bg-zinc-950 space-y-4">
              <div class="rounded-xl border border-zinc-800 bg-zinc-900/80 p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                <div>
                  <p class="text-xs sm:text-sm text-zinc-200 font-semibold font-sans">Quick install flow</p>
                  <p id="docker-toggle-status" class="text-xs sm:text-sm text-zinc-400 font-sans">Need Docker first? Keep this off and run Step 1.</p>
                </div>
                <label for="docker-installed" class="inline-flex items-center gap-3 text-xs sm:text-sm text-zinc-100 font-sans select-none">
                  <span>Docker installed?</span>
                  <span class="relative inline-flex h-6 w-11 items-center">
                    <input id="docker-installed" type="checkbox" class="peer sr-only" />
                    <span class="h-6 w-11 rounded-full bg-zinc-700 transition-colors duration-300 peer-checked:bg-emerald-500"></span>
                    <span
                      class="pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow-sm transition-transform duration-300 peer-checked:translate-x-5"
                    ></span>
                  </span>
                </label>
              </div>

              <div id="docker-step" class="rounded-xl border border-zinc-800 bg-zinc-900/70 p-4 transition-all duration-300">
                <div class="flex items-center justify-between gap-3 mb-2">
                  <div class="text-[11px] uppercase tracking-[0.18em] text-zinc-500 font-semibold">Step 1</div>
                  <div class="text-xs sm:text-sm text-zinc-200 font-semibold">Install Docker</div>
                </div>
                <div class="flex flex-col sm:flex-row items-start justify-between gap-3">
                  <code class="block w-full max-w-full min-w-0 text-xs sm:text-sm text-zinc-300 font-mono overflow-x-auto whitespace-pre hide-scrollbar pr-0 sm:pr-4 leading-relaxed"
                    >curl -fsSL https://get.docker.com | sudo sh sudo usermod -aG docker $USER && newgrp docker</code
                  >
                  <button
                    onclick="navigator.clipboard.writeText('curl -fsSL https://get.docker.com | sudo sh\nsudo usermod -aG docker $USER && newgrp docker')"
                    class="text-zinc-500 hover:text-white transition-colors p-1.5 rounded hover:bg-white/10 shrink-0 self-start"
                    title="Copy Docker setup"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>

              <div class="rounded-xl border border-zinc-700 bg-zinc-900 p-4">
                <div class="flex items-center justify-between gap-3 mb-2">
                  <div class="text-[11px] uppercase tracking-[0.18em] text-zinc-500 font-semibold">Step 2</div>
                  <div class="text-xs sm:text-sm text-zinc-100 font-semibold">Run Yantr</div>
                </div>
                <div class="flex flex-col sm:flex-row items-start justify-between gap-3">
                  <code class="block w-full max-w-full min-w-0 text-xs sm:text-sm text-zinc-200 font-mono overflow-x-auto whitespace-pre hide-scrollbar pr-0 sm:pr-4 leading-relaxed"
                    >docker run -d --name yantr -p 80:5252 -p 443:5252 \ -v /var/run/docker.sock:/var/run/docker.sock \ --restart unless-stopped
                    ghcr.io/besoeasy/yantr</code
                  >
                  <button
                    onclick="
                      navigator.clipboard.writeText(
                        'docker run -d --name yantr -p 80:5252 -p 443:5252 -v /var/run/docker.sock:/var/run/docker.sock --restart unless-stopped ghcr.io/besoeasy/yantr',
                      )
                    "
                    class="text-zinc-500 hover:text-white transition-colors p-1.5 rounded hover:bg-white/10 shrink-0 self-start"
                    title="Copy Yantr install"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- What is Yantr Section (Features in list style) -->
      <div class="max-w-4xl pt-8 sm:pt-12" id="features">
        <h2 class="text-2xl font-bold font-sans mb-6">What is Yantr?</h2>
        <p class="text-gray-600 mb-10 max-w-2xl font-sans">
          Yantr is an open source control plane that helps you manage self-hosted applications on your server, laptop, or cloud instance.
        </p>

        <div class="space-y-6 font-mono text-sm sm:text-base" id="features-list">
          <!-- Features loaded via JS -->
        </div>
      </div>

      <!-- App Catalog + Featured App (combined) -->
      <div class="pt-12 sm:pt-24" id="apps">
        <div class="flex flex-wrap items-end justify-between gap-3 mb-8 border-b border-gray-200 pb-4">
          <h2 class="text-2xl font-bold font-sans">App Catalog</h2>
          <a href="https://github.com/besoeasy/yantr/tree/main/apps" target="_blank" class="text-sm font-medium hover:underline">View all 100+ apps -></a>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
          <!-- Featured App — left column -->
          <div
            id="featured-app-card"
            class="opacity-0 translate-y-4 transition-all duration-700 border border-gray-200 bg-white p-6 flex flex-col gap-5 lg:row-span-2"
          >
            <div>
              <p class="text-[10px] uppercase tracking-[0.18em] text-gray-400 font-semibold mb-3">Today's pick</p>
              <div class="flex items-center gap-3 mb-4">
                <div class="w-12 h-12 rounded-lg border border-gray-200 bg-gray-50 flex items-center justify-center overflow-hidden shrink-0">
                  <img id="featured-app-logo" alt="Featured app logo" class="w-full h-full object-cover" />
                </div>
                <div>
                  <h3 id="featured-app-name" class="text-lg font-bold font-sans leading-tight">Loading...</h3>
                  <p id="featured-app-id" class="text-[10px] text-gray-400 font-mono uppercase tracking-wider mt-0.5"></p>
                </div>
              </div>
              <p id="featured-app-description" class="text-gray-500 text-sm leading-relaxed font-sans"></p>
            </div>

            <div class="flex flex-wrap gap-1.5" id="featured-app-categories"></div>

            <div class="mt-auto flex items-center justify-between">
              <a
                id="featured-app-website"
                href="#"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-1.5 text-xs font-semibold font-mono uppercase tracking-wider text-gray-500 hover:text-black border border-gray-200 hover:border-gray-400 px-3 py-1.5 transition-colors"
              >
                Visit Website <span aria-hidden="true">↗</span>
              </a>
              <p class="text-[10px] text-gray-300 font-mono" id="featured-app-date"></p>
            </div>
          </div>

          <!-- App grid — right columns -->
          <div class="lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4" id="app-grid">
            <!-- Apps loaded via JS -->
          </div>
        </div>
      </div>

      <!-- Detailed Features Grid -->
      <div class="pt-16 sm:pt-32 pb-12 sm:pb-20" id="detailed-features">
        <div class="text-center mb-16 opacity-0 translate-y-4 transition-all duration-700" id="features-header">
          <h2 class="text-3xl md:text-5xl font-extrabold font-sans mb-6 tracking-tight text-black">
            Everything you need. <br /><span class="text-gray-400">Nothing you don't.</span>
          </h2>
          <p class="text-lg text-gray-500 max-w-2xl mx-auto font-sans leading-relaxed">
            Yantr is built for developers who want a powerful homelab without the maintenance headache. It runs alongside your OS, not over it.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="features-grid-container">
          <!-- Cards injected via JS -->
        </div>
      </div>

      <!-- Screenshot Section -->
      <div class="py-12 sm:py-20 border-t border-gray-100" id="screenshots">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
          <div class="text-center mb-12">
            <h2 class="text-3xl font-bold font-sans mb-4 tracking-tight">See it in action</h2>
          </div>
          <div class="rounded-xl overflow-hidden shadow-2xl border border-gray-200 bg-gray-100 relative group">
            <div class="absolute inset-0 bg-gray-200 animate-pulse" id="screenshot-loader"></div>
            <img id="screenshot-img" src="" alt="Yantr Interface" class="w-full h-auto opacity-0 transition-opacity duration-700 relative z-10" />
            <div
              class="absolute bottom-0 left-0 right-0 p-4 bg-white/90 backdrop-blur border-t border-gray-200 translate-y-full group-hover:translate-y-0 transition-transform duration-300 z-20"
            >
              <p id="screenshot-caption" class="text-sm font-medium text-black font-mono text-center"></p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Simple Footer -->
    <footer class="border-t border-gray-200 py-12 bg-gray-50">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row justify-between items-center gap-6 text-sm text-gray-500">
        <div><span class="font-bold text-black">YANTR</span> &copy; 2026</div>
        <div class="flex gap-6">
          <a href="https://github.com/besoeasy/yantr" class="hover:text-black">GitHub</a>
        </div>
      </div>
    </footer>

    <script>
      function getRandomUniqueItems(items, count) {
        if (!Array.isArray(items) || items.length === 0 || count <= 0) return [];

        const shuffled = [...items];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }

        return shuffled.slice(0, Math.min(count, shuffled.length));
      }

      function getLogoUrl(app) {
        return app.logo
          ? app.logo.startsWith("http")
            ? app.logo
            : `https://ipfs.io/ipfs/${app.logo}`
          : `https://ui-avatars.com/api/?name=${encodeURIComponent(app.name)}&background=random&color=fff&bold=true`;
      }

      function formatLocalDateKey(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }

      async function sha256Hex(value) {
        const bytes = new TextEncoder().encode(value);
        const hashBuffer = await crypto.subtle.digest("SHA-256", bytes);
        return Array.from(new Uint8Array(hashBuffer))
          .map((byte) => byte.toString(16).padStart(2, "0"))
          .join("");
      }

      function computeDeterministicIndex(hashHex, length) {
        if (!length) return 0;
        const hashChunk = hashHex.slice(0, 12);
        const numeric = Number.parseInt(hashChunk, 16);
        return numeric % length;
      }

      async function loadFeaturedApp() {
        try {
          const response = await fetch("./apps.json");
          const data = await response.json();
          const apps = data.apps;
          if (!apps || apps.length === 0) return;

          const dateKey = formatLocalDateKey(new Date());
          const hash = await sha256Hex(dateKey);
          const index = computeDeterministicIndex(hash, apps.length);
          const featuredApp = apps[index];

          const dateEl = document.getElementById("featured-app-date");
          const cardEl = document.getElementById("featured-app-card");
          const logoEl = document.getElementById("featured-app-logo");
          const nameEl = document.getElementById("featured-app-name");
          const idEl = document.getElementById("featured-app-id");
          const descEl = document.getElementById("featured-app-description");
          const categoriesEl = document.getElementById("featured-app-categories");
          const websiteEl = document.getElementById("featured-app-website");

          dateEl.textContent = dateKey;
          logoEl.src = getLogoUrl(featuredApp);
          nameEl.textContent = featuredApp.name || "Unknown app";
          idEl.textContent = featuredApp.id ? `ID: ${featuredApp.id}` : "";
          descEl.textContent = featuredApp.description || "No description available.";
          websiteEl.href = featuredApp.website || "#";
          websiteEl.classList.toggle("pointer-events-none", !featuredApp.website);
          websiteEl.classList.toggle("opacity-60", !featuredApp.website);

          categoriesEl.innerHTML = "";
          const categories = Array.isArray(featuredApp.category) ? featuredApp.category : [];
          if (categories.length === 0) {
            const emptyCategory = document.createElement("span");
            emptyCategory.className = "text-[10px] text-gray-300 font-mono";
            emptyCategory.textContent = "No categories";
            categoriesEl.appendChild(emptyCategory);
          } else {
            categories.forEach((category, idx) => {
              const tag = document.createElement("span");
              tag.className =
                "text-[10px] font-mono uppercase tracking-wider border border-gray-100 text-gray-400 px-1.5 py-0.5 opacity-0 translate-y-2 transition-all duration-500";
              tag.textContent = category;
              categoriesEl.appendChild(tag);
              setTimeout(() => {
                tag.classList.remove("opacity-0", "translate-y-2");
              }, idx * 80);
            });
          }

          requestAnimationFrame(() => {
            cardEl.classList.remove("opacity-0", "translate-y-4");
          });
        } catch (error) {
          console.error("Failed to load featured app:", error);
        }
      }

      async function loadApps() {
        try {
          const response = await fetch("./apps.json");
          const data = await response.json();
          const apps = data.apps;
          if (!apps || apps.length === 0) return;

          const grid = document.getElementById("app-grid");
          grid.innerHTML = "";

          // Helper to create card
          const createCard = (app) => {
            const card = document.createElement("a");
            card.href = app.website || "#";
            card.target = "_blank";
            card.rel = "noopener noreferrer";
            // Added flex-shrink-0 to ensure consistent sizing, and adjusted transition duration for smoother fade
            card.className =
              "border border-gray-200 bg-white p-5 hover:border-black transition-all duration-1000 group flex flex-col h-full opacity-0 -translate-y-4 cursor-pointer";

            const logoUrl = getLogoUrl(app);

            card.innerHTML = `
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-8 h-8 rounded bg-gray-100 flex items-center justify-center overflow-hidden border border-gray-100 shrink-0">
                                <img src="${logoUrl}" alt="${app.name}" class="w-full h-full object-cover">
                            </div>
                            <h3 class="font-bold text-sm truncate font-mono group-hover:underline">${app.name}</h3>
                        </div>
                        <p class="text-xs text-gray-500 line-clamp-2 leading-relaxed font-sans mb-3 flex-grow">${app.description || "No description available."}</p>
                        <div class="flex items-center gap-2 mt-auto">
                           ${app.category ? `<span class="text-[10px] uppercase tracking-wider text-gray-400 border border-gray-100 px-1.5 py-0.5 rounded">${app.category[0]}</span>` : ""}
                        </div>
                    `;

            // Simple entrance animation
            requestAnimationFrame(() => {
              card.classList.remove("opacity-0", "-translate-y-4");
            });

            return card;
          };

          // Initial load: unique random apps
          const DISPLAY_COUNT = 5;
          let currentApps = getRandomUniqueItems(apps, DISPLAY_COUNT);
          currentApps.forEach((app) => {
            grid.appendChild(createCard(app));
          });

          // Periodic update
          setInterval(() => {
            if (document.hidden) return; // Pause if tab is hidden

            // Pick a random app not currently shown
            const currentIds = new Set(currentApps.map((app) => app.id));
            const availableApps = apps.filter((app) => !currentIds.has(app.id));
            if (availableApps.length === 0) return;

            const randomApp = availableApps[Math.floor(Math.random() * availableApps.length)];
            const newCard = createCard(randomApp);

            // Add to front
            grid.prepend(newCard);
            currentApps = [randomApp, ...currentApps].slice(0, DISPLAY_COUNT);

            // Remove from back with slow fade
            if (grid.children.length > DISPLAY_COUNT) {
              const last = grid.lastElementChild;
              // Slower fade out
              last.style.transition = "all 2s ease-out";
              last.classList.add("opacity-0", "scale-90", "blur-sm");

              // Wait for transition to finish before removing
              setTimeout(() => last.remove(), 2000);
            }
          }, 4000); // Slightly faster updates
        } catch (error) {
          console.error("Failed to load apps:", error);
        }
      }

      async function loadStars() {
        try {
          const response = await fetch("https://api.github.com/repos/besoeasy/yantr");
          if (response.ok) {
            const data = await response.json();
            const stars = data.stargazers_count;
            const formatted = stars > 1000 ? (stars / 1000).toFixed(1) + "k" : stars;
            document.getElementById("stars-nav").textContent = formatted;
          }
        } catch (e) {
          document.getElementById("stars-nav").textContent = "";
        }
      }

      function animateFeatures() {
        const allFeatures = [
          {
            title: "Docker Native",
            description: "Runs alongside your OS. No custom ISO or system takeover required.",
          },
          {
            title: "One-Click Deploys",
            description: "Instant access to popular self-hosted apps with clean defaults and smart presets.",
          },
          {
            title: "Temporary Installations",
            description: "Set expiration times and auto-delete apps when you're done testing.",
          },
          {
            title: "Multiple Instances",
            description: "Run the same app multiple times with different configurations.",
          },
          {
            title: "Direct Volume Access",
            description: "Browse and manage app data files directly from the UI with built-in file browser.",
          },
          {
            title: "Volume Backup & Restore",
            description: "Backup and restore Docker volumes to S3/MinIO with a single click for easy data migration.",
          },
          {
            title: "Auto-Cleanup",
            description: "Automatically removes old unused Docker images (10+ days) to free disk space.",
          },
          {
            title: "Premium UI",
            description: "Modern Vue.js interface that feels fast and polished with dark mode support.",
          },
          {
            title: "Filesystem Safe",
            description: "Never modifies your host filesystem. App data lives in isolated Docker volumes.",
          },
          {
            title: "Auto Configuration",
            description: "Automatic port mapping and smart defaults—launch apps without spending 10 minutes on setup.",
          },
          {
            title: "Always Latest Apps",
            description: "Ships the newest app releases regardless of your Yantr version—updates from source.",
          },
          {
            title: "Zero Commitment",
            description: "Install, use, and delete with no residue. Zero modification to your host system.",
          },
          {
            title: "No OS Replacement",
            description: "Lightweight app store that runs alongside your existing operating system.",
          },
          {
            title: "100% Docker Compose",
            description: "Generates standard Docker Compose files you can take anywhere. No vendor lock-in.",
          },
          {
            title: "On-Demand Resources",
            description: "Nothing runs unless you start it. Only use resources for apps you actually need.",
          },
          {
            title: "Complete AI Agent Suite",
            description: "First platform to ship isolated AI agents: Ollama, Open WebUI, Perplexica, OpenCode, and more.",
          },
          {
            title: "GPU Passthrough",
            description: "First-class support for local LLMs with GPU acceleration for Ollama and AI workloads.",
          },
          {
            title: "WebDAV Support",
            description: "Built-in WebDAV access for syncing files between volumes or machines using rclone.",
          },
          {
            title: "Single Docker Command",
            description: "Launch Yantr in seconds with one command. Access at http://localhost immediately.",
          },
          {
            title: "Isolated Containers",
            description: "No Python environment conflicts, CUDA version mismatches, or shared dependency hell.",
          },
          {
            title: "100+ App Catalog",
            description: "Curated catalog of high-quality self-hosted tools across AI, media, privacy, and more.",
          },
          {
            title: "Remote Access Ready",
            description: "Works seamlessly with Tailscale for secure remote access from anywhere.",
          },
          {
            title: "Volume Browser",
            description: "Browse and manage persistent data directly in your browser with integrated dufs server.",
          },
          {
            title: "Data Migration",
            description: "Easy backup and restore for moving volumes between machines or creating snapshots.",
          },
          {
            title: "Cross-Platform",
            description: "Runs on Linux, macOS, and Windows with Docker Desktop. Use your existing hardware.",
          },
        ];

        const featuresList = document.getElementById("features-list");

        // Helper to create feature element
        const createFeature = (feature) => {
          const div = document.createElement("div");
          div.className = "flex gap-4 items-start opacity-0 -translate-y-4 transition-all duration-1000 feature-item";
          div.innerHTML = `
                    <span class="text-gray-400 shrink-0 select-none">[*]</span>
                    <div>
                        <span class="font-bold text-black mr-2">${feature.title}</span>
                        <span class="text-gray-600">${feature.description}</span>
                    </div>
                `;

          // Trigger animation
          requestAnimationFrame(() => {
            div.classList.remove("opacity-0", "-translate-y-4");
          });

          return div;
        };

        // Initial load: 4 random features
        const DISPLAY_COUNT = 4;
        let currentFeatures = allFeatures.sort(() => 0.5 - Math.random()).slice(0, DISPLAY_COUNT);
        currentFeatures.forEach((feature, index) => {
          setTimeout(() => {
            featuresList.appendChild(createFeature(feature));
          }, index * 100); // Stagger initial load
        });

        // Periodic update
        setInterval(() => {
          if (document.hidden) return; // Pause if tab is hidden

          // Pick a random feature
          const randomFeature = allFeatures[Math.floor(Math.random() * allFeatures.length)];
          const newFeature = createFeature(randomFeature);

          // Add to front
          featuresList.prepend(newFeature);

          // Remove from back with slow fade
          if (featuresList.children.length > DISPLAY_COUNT) {
            const last = featuresList.lastElementChild;
            last.style.transition = "all 2s ease-out";
            last.classList.add("opacity-0", "scale-90");

            // Wait for transition to finish before removing
            setTimeout(() => last.remove(), 2000);
          }
        }, 4000); // Update every 4 seconds
      }

      function loadDetailedFeatures() {
        const features = [
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>`,
            title: "Zero OS Lock-in",
            desc: "Runs alongside macOS, Windows, or Linux. No custom ISOs, no formatting required.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>`,
            title: "1-Click Deploys",
            desc: "Launch complex stacks like Ollama + Open WebUI in seconds with pre-configured templates.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            title: "Disposable Apps",
            desc: "Set expiration timers for apps. Great for testing tools without cluttering your system.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>`,
            title: "Isolated AI Stack",
            desc: "First-class support for AI agents. No Python conflicts, no CUDA version mismatches.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>`,
            title: "Filesystem Safe",
            desc: "All data lives in isolated Docker volumes. Your host OS files are never touched.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg>`,
            title: "Volume Browser",
            desc: "Manage app data directly from the browser with built-in WebDAV support.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>`,
            title: "S3 Backups",
            desc: "One-click backup and restore of entire volumes to any S3-compatible storage.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            title: "GPU Passthrough",
            desc: "Automatic GPU detection and passthrough for accelerated local LLM inference.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>`,
            title: "Auto Cleanup",
            desc: "Intelligent garbage collection removes unused images and networks to save space.",
          },
        ];

        const container = document.getElementById("features-grid-container");
        if (!container) return;

        features.forEach((feature, index) => {
          const card = document.createElement("div");
          card.className =
            "group relative p-8 bg-white border border-gray-100 rounded-2xl hover:border-black transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 opacity-0 translate-y-8";
          card.innerHTML = `
                <div class="w-14 h-14 bg-gray-50 rounded-xl flex items-center justify-center mb-6 group-hover:bg-black group-hover:text-white transition-colors duration-500 group-hover:scale-110 transform">
                    ${feature.icon}
                </div>
                <h3 class="text-xl font-bold font-sans mb-3 group-hover:text-black transition-colors">${feature.title}</h3>
                <p class="text-sm text-gray-500 leading-relaxed font-sans group-hover:text-gray-700 transition-colors">${feature.desc}</p>
                <!-- Decorative element -->
                <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                    <svg class="w-4 h-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                </div>
            `;
          container.appendChild(card);

          // Staggered Animation
          setTimeout(() => {
            requestAnimationFrame(() => {
              card.classList.remove("opacity-0", "translate-y-8");
            });
          }, index * 100);
        });
      }

      function initScrollAnimations() {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                if (entry.target.id === "detailed-features") {
                  const header = document.getElementById("features-header");
                  if (header) header.classList.remove("opacity-0", "translate-y-4");

                  loadDetailedFeatures();
                  observer.unobserve(entry.target);
                }
              }
            });
          },
          { threshold: 0.1 },
        );

        const section = document.getElementById("detailed-features");
        if (section) observer.observe(section);
      }

      function initHeroRotator() {
        const messages = [
          {
            title: "Don't buy that<br />overpriced NUC.",
            desc: "Turn your old laptop into a powerhouse homelab. Yantr runs on the hardware you already own.",
          },
          {
            title: "Don't surrender<br />your OS.",
            desc: "Yantr runs alongside macOS, Windows, and Linux. No formatting, no ISOs, no taking over your computer.",
          },
          {
            title: "Self-host<br />open source apps.",
            desc: "Turn any device into a private cloud. Run 100+ apps like Ollama, Open WebUI, and Perplexica on your own infrastructure.",
          },
          {
            title: "Your data, your rules,<br />your hardware.",
            desc: "Stop renting cloud servers. Host your own AI, media, and files locally with zero monthly fees.",
          },
        ];

        let currentIndex = 0;
        const titleEl = document.getElementById("hero-title");
        const descEl = document.getElementById("hero-desc");

        setInterval(() => {
          // Fade out
          titleEl.classList.add("opacity-0");
          descEl.classList.add("opacity-0");

          setTimeout(() => {
            currentIndex = (currentIndex + 1) % messages.length;
            titleEl.innerHTML = messages[currentIndex].title;
            descEl.textContent = messages[currentIndex].desc;

            // Fade in
            titleEl.classList.remove("opacity-0");
            descEl.classList.remove("opacity-0");
          }, 500); // Wait for fade out
        }, 5000); // Rotate every 5 seconds
      }

      function loadRandomScreenshot() {
        const gifs = [
          {
            url: "https://github.com/user-attachments/assets/2e107ef8-2411-4d62-9886-9fb917b9993d",
            caption: "Main Dashboard - Clean, modern interface for managing your apps",
          },
          {
            url: "https://github.com/user-attachments/assets/3a9604fa-d634-4329-aa73-ed4658145b00",
            caption: "Temporary Installation - Set auto-expiry for apps to keep your system clean",
          },
          {
            url: "https://github.com/user-attachments/assets/862fb852-e52d-4f94-8372-234c1d6c6b51",
            caption: "Volume Browser - Browse and manage persistent data files directly",
          },
          {
            url: "https://github.com/user-attachments/assets/e5dc0ad8-0181-4676-b7b1-1cc961a6b1ed",
            caption: "Dark Mode - Fully supported dark theme for late night hacking",
          },
        ];

        const img = document.getElementById("screenshot-img");
        const caption = document.getElementById("screenshot-caption");
        const loader = document.getElementById("screenshot-loader");
        if (!img || !caption || gifs.length === 0) return;

        const ROTATION_MS = 60000;
        let currentIndex = -1;

        const showNextGif = () => {
          let nextIndex = Math.floor(Math.random() * gifs.length);
          if (gifs.length > 1) {
            while (nextIndex === currentIndex) {
              nextIndex = Math.floor(Math.random() * gifs.length);
            }
          }

          currentIndex = nextIndex;
          const nextGif = gifs[currentIndex];

          if (loader) loader.classList.remove("hidden");
          img.classList.add("opacity-0");

          const tempImg = new Image();
          tempImg.onload = () => {
            img.src = nextGif.url;
            caption.textContent = nextGif.caption;
            if (loader) loader.classList.add("hidden");
            requestAnimationFrame(() => {
              img.classList.remove("opacity-0");
            });
          };
          tempImg.src = nextGif.url;
        };

        showNextGif();
        setInterval(() => {
          if (document.hidden) return;
          showNextGif();
        }, ROTATION_MS);
      }

      async function initHeroAnimation() {
        const container = document.getElementById("hero-stars");
        if (!container) return;

        try {
          const response = await fetch("./apps.json");
          const data = await response.json();
          const apps = data.apps;
          if (!apps || !apps.length) return;

          const starCount = 60;
          const appsWithLogo = apps.filter((app) => app.logo);
          const selectedApps = getRandomUniqueItems(appsWithLogo, starCount);

          // Match container height to full document height
          const docHeight = document.documentElement.scrollHeight;
          container.style.height = docHeight + "px";

          for (const app of selectedApps) {
            const logoUrl = app.logo ? getLogoUrl(app) : null;
            if (!logoUrl) continue;

            const el = document.createElement("div");
            el.className = "star-icon absolute flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/40 backdrop-blur-md shadow-sm border border-white/20";

            // Spread icons across full document width and height
            el.style.left = Math.floor(Math.random() * 88) + 2 + "%";
            el.style.top = Math.floor(Math.random() * docHeight) + "px";

            const size = Math.floor(Math.random() * 8) + 16; // 16px - 24px icon size

            el.style.animationDelay = Math.random() * 5 + "s";
            el.style.animationDuration = Math.random() * 3 + 3 + "s";
            el.innerHTML = `
              <img src="${logoUrl}" style="width:${size}px; height:${size}px;" class="object-contain shrink-0" alt="${app.name}">
              <span class="text-xs font-semibold text-gray-700 whitespace-nowrap">${app.name}</span>
            `;

            container.appendChild(el);
          }
        } catch (e) {
          console.error("Hero animation failed:", e);
        }
      }

      function initDockerStepToggle() {
        const dockerInstalledCheckbox = document.getElementById("docker-installed");
        const dockerStep = document.getElementById("docker-step");
        const dockerToggleStatus = document.getElementById("docker-toggle-status");

        if (!dockerInstalledCheckbox || !dockerStep) return;

        const syncDockerStep = () => {
          if (dockerInstalledCheckbox.checked) {
            dockerStep.classList.add("hidden");
            if (dockerToggleStatus) {
              dockerToggleStatus.textContent = "Docker already installed";
            }
          } else {
            dockerStep.classList.remove("hidden");
            if (dockerToggleStatus) {
              dockerToggleStatus.textContent = "Need Docker first? Keep this off and run Step 1.";
            }
          }
        };

        dockerInstalledCheckbox.addEventListener("change", syncDockerStep);
        syncDockerStep();
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadFeaturedApp();
        loadApps();
        loadStars();
        animateFeatures();
        initScrollAnimations();
        initHeroRotator();
        loadRandomScreenshot();
        initHeroAnimation();
        initDockerStepToggle();

        // Cleanup entrance animations on rotator elements to allow transitions to work later
        setTimeout(() => {
          const title = document.getElementById("hero-title");
          const desc = document.getElementById("hero-desc");
          if (title) {
            title.classList.remove("animate-fade-in-up", "delay-100", "opacity-0");
            title.style.opacity = ""; // Ensure it stays visible
          }
          if (desc) {
            desc.classList.remove("animate-fade-in-up", "delay-200", "opacity-0");
            desc.style.opacity = "";
          }
        }, 1500);
      });
    </script>
  </body>
</html>
