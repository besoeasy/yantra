<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yantra — The Open Source Homelab Control Plane</title>
    <meta
      name="description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta name="theme-color" content="#ffffff" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yantra.besoeasy.com/" />
    <meta property="og:title" content="Yantra — The Open Source Homelab Control Plane" />
    <meta property="og:description" content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure." />
    <meta property="og:image" content="https://yantra.besoeasy.com/yantra.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://yantra.besoeasy.com/" />
    <meta property="twitter:title" content="Yantra — The Open Source Homelab Control Plane" />
    <meta property="twitter:description" content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure." />
    <meta property="twitter:image" content="https://yantra.besoeasy.com/yantra.png" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
              mono: ["JetBrains Mono", "monospace"],
            },
            colors: {
              black: "#0a0a0a",
              dark: "#111111",
              gray: {
                50: "#F9FAFB",
                100: "#F3F4F6",
                200: "#E5E7EB",
                400: "#9CA3AF",
                500: "#6B7280",
                600: "#4B5563",
                800: "#1F2937",
                900: "#111827",
              },
            },
            boxShadow: {
              xs: "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
            },
          },
        },
      };
    </script>
    <style>
      .typing-effect {
        border-right: 2px solid #4ade80;
        white-space: nowrap;
        overflow: hidden;
        animation: blink 1s step-end infinite;
      }
      @keyframes blink {
        50% {
          border-color: transparent;
        }
      }
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
  </head>
  <body class="bg-white text-black font-mono antialiased selection:bg-black selection:text-white">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-sm border-b border-gray-100">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
        <div class="flex items-center gap-8">
          <a href="#" class="text-xl font-bold tracking-tight bg-black text-white px-2 py-1">YANTRA</a>
          <nav class="hidden md:flex items-center gap-6 text-sm font-medium text-gray-600">
            <a href="#features" class="hover:text-black transition-colors">Features</a>
            <a href="#apps" class="hover:text-black transition-colors">Apps</a>
          </nav>
        </div>
        <div class="flex items-center gap-4">
          <a href="https://github.com/besoeasy/yantra" target="_blank" class="hidden sm:flex items-center gap-2 bg-black text-white px-4 py-2 text-sm font-bold hover:bg-gray-800 transition-colors">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd" />
            </svg>
            Star on GitHub <span class="text-gray-400 font-normal" id="stars-nav"></span>
          </a>
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 pt-16 pb-24">
      <!-- Badge -->
      <div class="mb-8 animate-fade-in">
        <a
          href="https://github.com/besoeasy/yantra/releases"
          target="_blank"
          class="inline-flex items-center gap-3 text-sm text-gray-600 hover:text-black transition-colors group"
        >
          <span class="bg-black text-white text-xs px-1.5 py-0.5 font-bold uppercase">New</span>
          <span class="border-b border-transparent group-hover:border-gray-300">v1.0 Beta is now available for Linux, macOS and Windows.</span>
          <span class="text-gray-400 group-hover:translate-x-0.5 transition-transform">&rarr;</span>
        </a>
      </div>

      <!-- Hero -->
      <div class="grid lg:grid-cols-2 gap-12 lg:gap-20 items-start mb-24">
        <div>
          <h1 id="hero-title" class="text-5xl sm:text-6xl font-extrabold tracking-tight mb-6 font-sans text-black leading-[1.1] transition-opacity duration-500 ease-in-out">
            Self-host<br />
            open source apps.
          </h1>
          <p id="hero-desc" class="text-lg text-gray-600 leading-relaxed max-w-xl mb-10 font-sans transition-opacity duration-500 ease-in-out">
            Turn any device into a private cloud. Run 100+ apps like Ollama, Open WebUI, and Perplexica on your own infrastructure. No OS replacement needed.
          </p>

          <!-- Install Widget -->
          <div class="border border-gray-200 rounded-lg overflow-hidden bg-gray-50/50 max-w-lg">
            <div class="flex border-b border-gray-200 bg-white">
              <button id="tab-no-docker" onclick="switchInstallTab('no-docker')" class="px-4 py-2 text-sm font-bold border-b-2 border-black bg-gray-50 text-black">No Docker?</button>
              <button id="tab-has-docker" onclick="switchInstallTab('has-docker')" class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-black transition-colors">Have Docker?</button>
            </div>
            <div id="content-no-docker" class="p-4 bg-gray-50 flex items-start justify-between group">
              <code class="text-xs sm:text-sm text-gray-800 font-medium overflow-x-auto whitespace-pre hide-scrollbar pr-4">curl -fsSL https://get.docker.com | sudo sh
sudo usermod -aG docker $USER && newgrp docker
docker run -d --name yantra -p 80:5252 -p 443:5252 -v /var/run/docker.sock:/var/run/docker.sock --restart unless-stopped ghcr.io/besoeasy/yantra</code>
              <button
                onclick="
                  navigator.clipboard.writeText(
                    'curl -fsSL https://get.docker.com | sudo sh\nsudo usermod -aG docker $USER && newgrp docker\ndocker run -d --name yantra -p 80:5252 -p 443:5252 -v /var/run/docker.sock:/var/run/docker.sock --restart unless-stopped ghcr.io/besoeasy/yantra',
                  )
                "
                class="text-gray-400 hover:text-black transition-colors p-1 mt-1"
                title="Copy command"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </button>
            </div>
            <div id="content-has-docker" class="p-4 bg-gray-50 flex items-start justify-between group hidden">
              <code class="text-sm text-gray-800 font-medium overflow-x-auto whitespace-nowrap hide-scrollbar pr-4">
                docker run -d --name yantra -p 80:5252 -p 443:5252 -v /var/run/docker.sock:/var/run/docker.sock --restart unless-stopped ghcr.io/besoeasy/yantra
              </code>
              <button
                onclick="
                  navigator.clipboard.writeText(
                    'docker run -d --name yantra -p 80:5252 -p 443:5252 -v /var/run/docker.sock:/var/run/docker.sock --restart unless-stopped ghcr.io/besoeasy/yantra',
                  )
                "
                class="text-gray-400 hover:text-black transition-colors p-1 mt-1"
                title="Copy command"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Terminal Image/Preview -->
        <div class="relative mt-4 lg:mt-0">
          <div class="rounded-lg bg-[#0d0d0d] border border-gray-800 shadow-xl overflow-hidden">
            <div class="flex items-center gap-1.5 px-4 py-3 bg-[#1a1a1a] border-b border-gray-800">
              <div class="w-2.5 h-2.5 rounded-full bg-[#ff5f56]"></div>
              <div class="w-2.5 h-2.5 rounded-full bg-[#ffbd2e]"></div>
              <div class="w-2.5 h-2.5 rounded-full bg-[#27c93f]"></div>
            </div>
            <div class="p-6 text-sm font-mono leading-relaxed h-[340px] overflow-y-auto">
              <div class="text-gray-400 mb-2"># Deploying Open WebUI...</div>
              <div class="flex gap-2 text-gray-300">
                <span class="text-green-500">➜</span>
                <span>node daemon/main.js deploy open-webui</span>
              </div>
              <div class="mt-2 text-gray-500">
                [+] Pulling images...<br />
                [+] Creating volumes...<br />
                [+] Starting container open-webui...<br />
              </div>
              <div class="mt-2 text-green-400">✔ App deployed successfully</div>
              <div class="mt-4 text-gray-400 mb-2"># Checking status...</div>
              <div class="flex gap-2 text-gray-300">
                <span class="text-green-500">➜</span>
                <span>docker ps --format "{{.Names}}\t{{.Status}}"</span>
              </div>
              <div class="mt-2 text-gray-300">
                yantra Up 2 hours<br />
                ollama Up 15 minutes<br />
                open-webui Up 12 seconds
              </div>
              <div class="mt-4 flex gap-2">
                <span class="text-green-500">➜</span>
                <span class="typing-effect border-r-2 border-green-500 pr-1">_</span>
              </div>
            </div>
          </div>
          <!-- Decoration -->
          <div class="absolute -z-10 -right-20 -bottom-20 w-64 h-64 bg-gray-100 rounded-full blur-3xl opacity-50"></div>
        </div>
      </div>

      <!-- What is Yantra Section (Features in list style) -->
      <div class="max-w-4xl pt-12" id="features">
        <h2 class="text-2xl font-bold font-sans mb-6">What is Yantra?</h2>
        <p class="text-gray-600 mb-10 max-w-2xl font-sans">
          Yantra is an open source control plane that helps you manage self-hosted applications on your server, laptop, or cloud instance.
        </p>

        <div class="space-y-6 font-mono text-sm sm:text-base" id="features-list">
          <!-- Features loaded via JS -->
        </div>
      </div>

      <!-- Apps Section -->
      <div class="pt-32" id="apps">
        <div class="flex items-end justify-between mb-8 border-b border-gray-200 pb-4">
          <h2 class="text-2xl font-bold font-sans">App Catalog</h2>
          <a href="https://github.com/besoeasy/yantra/tree/main/apps" target="_blank" class="text-sm font-medium hover:underline">View all 100+ apps -></a>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="app-grid">
          <!-- Apps loaded via JS -->
        </div>
      </div>

      <!-- Detailed Features Grid -->
      <div class="pt-32 pb-20" id="detailed-features">
        <div class="text-center mb-16 opacity-0 translate-y-4 transition-all duration-700" id="features-header">
          <h2 class="text-3xl md:text-5xl font-extrabold font-sans mb-6 tracking-tight text-black">
            Everything you need. <br /><span class="text-gray-400">Nothing you don't.</span>
          </h2>
          <p class="text-lg text-gray-500 max-w-2xl mx-auto font-sans leading-relaxed">
            Yantra is built for developers who want a powerful homelab without the maintenance headache. It runs alongside your OS, not over it.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="features-grid-container">
          <!-- Cards injected via JS -->
        </div>
      </div>

      <!-- Screenshot Section -->
      <div class="py-20 border-t border-gray-100" id="screenshots">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
          <div class="text-center mb-12">
            <h2 class="text-3xl font-bold font-sans mb-4 tracking-tight">See it in action</h2>
          </div>
          <div class="rounded-xl overflow-hidden shadow-2xl border border-gray-200 bg-gray-100 relative group">
             <div class="absolute inset-0 bg-gray-200 animate-pulse" id="screenshot-loader"></div>
             <img id="screenshot-img" src="" alt="Yantra Interface" class="w-full h-auto opacity-0 transition-opacity duration-700 relative z-10">
             <div class="absolute bottom-0 left-0 right-0 p-4 bg-white/90 backdrop-blur border-t border-gray-200 translate-y-full group-hover:translate-y-0 transition-transform duration-300 z-20">
                  <p id="screenshot-caption" class="text-sm font-medium text-black font-mono text-center"></p>
             </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Simple Footer -->
    <footer class="border-t border-gray-200 py-12 bg-gray-50">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row justify-between items-center gap-6 text-sm text-gray-500">
        <div><span class="font-bold text-black">YANTRA</span> &copy; 2026</div>
        <div class="flex gap-6">
          <a href="#" class="hover:text-black">Twitter</a>
          <a href="https://github.com/besoeasy/yantra" class="hover:text-black">GitHub</a>
          <a href="mailto:hello@besoeasy.com" class="hover:text-black">Contact</a>
        </div>
      </div>
    </footer>

    <script>
      function switchInstallTab(tab) {
        // Update button styles
        const noDockerTab = document.getElementById("tab-no-docker");
        const hasDockerTab = document.getElementById("tab-has-docker");
        const noDockerContent = document.getElementById("content-no-docker");
        const hasDockerContent = document.getElementById("content-has-docker");

        if (tab === "no-docker") {
          noDockerTab.className = "px-4 py-2 text-sm font-bold border-b-2 border-black bg-gray-50 text-black";
          hasDockerTab.className = "px-4 py-2 text-sm font-medium text-gray-500 hover:text-black transition-colors";
          noDockerContent.classList.remove("hidden");
          hasDockerContent.classList.add("hidden");
        } else {
          hasDockerTab.className = "px-4 py-2 text-sm font-bold border-b-2 border-black bg-gray-50 text-black";
          noDockerTab.className = "px-4 py-2 text-sm font-medium text-gray-500 hover:text-black transition-colors";
          hasDockerContent.classList.remove("hidden");
          noDockerContent.classList.add("hidden");
        }
      }

      async function loadApps() {
        try {
          const response = await fetch("./apps.json");
          const data = await response.json();
          const apps = data.apps;
          if (!apps || apps.length === 0) return;

          const grid = document.getElementById("app-grid");
          grid.innerHTML = "";

          // Helper to create card
          const createCard = (app) => {
            const card = document.createElement("a");
            card.href = app.website || "#";
            card.target = "_blank";
            card.rel = "noopener noreferrer";
            // Added flex-shrink-0 to ensure consistent sizing, and adjusted transition duration for smoother fade
            card.className =
              "border border-gray-200 bg-white p-5 hover:border-black transition-all duration-1000 group flex flex-col h-full opacity-0 -translate-y-4 cursor-pointer";

            const logoUrl = app.logo
              ? app.logo.startsWith("http")
                ? app.logo
                : `https://ipfs.io/ipfs/${app.logo}`
              : `https://ui-avatars.com/api/?name=${encodeURIComponent(app.name)}&background=random&color=fff&bold=true`;

            card.innerHTML = `
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-8 h-8 rounded bg-gray-100 flex items-center justify-center overflow-hidden border border-gray-100 shrink-0">
                                <img src="${logoUrl}" alt="${app.name}" class="w-full h-full object-cover">
                            </div>
                            <h3 class="font-bold text-sm truncate font-mono group-hover:underline">${app.name}</h3>
                        </div>
                        <p class="text-xs text-gray-500 line-clamp-2 leading-relaxed font-sans mb-3 flex-grow">${app.description || "No description available."}</p>
                        <div class="flex items-center gap-2 mt-auto">
                           ${app.category ? `<span class="text-[10px] uppercase tracking-wider text-gray-400 border border-gray-100 px-1.5 py-0.5 rounded">${app.category[0]}</span>` : ""}
                        </div>
                    `;

            // Simple entrance animation
            requestAnimationFrame(() => {
              card.classList.remove("opacity-0", "-translate-y-4");
            });

            return card;
          };

          // Initial load: 12 random apps (increased from 8)
          const DISPLAY_COUNT = 11;
          let currentApps = apps.sort(() => 0.5 - Math.random()).slice(0, DISPLAY_COUNT);
          currentApps.forEach((app) => {
            grid.appendChild(createCard(app));
          });

          // Periodic update
          setInterval(() => {
            if (document.hidden) return; // Pause if tab is hidden

            // Pick a random app
            const randomApp = apps[Math.floor(Math.random() * apps.length)];
            const newCard = createCard(randomApp);

            // Add to front
            grid.prepend(newCard);

            // Remove from back with slow fade
            if (grid.children.length > DISPLAY_COUNT) {
              const last = grid.lastElementChild;
              // Slower fade out
              last.style.transition = "all 2s ease-out";
              last.classList.add("opacity-0", "scale-90", "blur-sm");

              // Wait for transition to finish before removing
              setTimeout(() => last.remove(), 2000);
            }
          }, 4000); // Slightly faster updates
        } catch (error) {
          console.error("Failed to load apps:", error);
        }
      }

      async function loadStars() {
        try {
          const response = await fetch("https://api.github.com/repos/besoeasy/yantra");
          if (response.ok) {
            const data = await response.json();
            const stars = data.stargazers_count;
            const formatted = stars > 1000 ? (stars / 1000).toFixed(1) + "k" : stars;
            document.getElementById("stars-nav").textContent = formatted;
          }
        } catch (e) {
          document.getElementById("stars-nav").textContent = "";
        }
      }

      function animateFeatures() {
        const allFeatures = [
          {
            title: "Docker Native",
            description: "Runs alongside your OS. No custom ISO or system takeover required.",
          },
          {
            title: "One-Click Deploys",
            description: "Instant access to popular self-hosted apps with clean defaults and smart presets.",
          },
          {
            title: "Temporary Installations",
            description: "Set expiration times and auto-delete apps when you're done testing.",
          },
          {
            title: "Multiple Instances",
            description: "Run the same app multiple times with different configurations.",
          },
          {
            title: "Direct Volume Access",
            description: "Browse and manage app data files directly from the UI with built-in file browser.",
          },
          {
            title: "Volume Backup & Restore",
            description: "Backup and restore Docker volumes to S3/MinIO with a single click for easy data migration.",
          },
          {
            title: "Auto-Cleanup",
            description: "Automatically removes old unused Docker images (10+ days) to free disk space.",
          },
          {
            title: "Premium UI",
            description: "Modern Vue.js interface that feels fast and polished with dark mode support.",
          },
          {
            title: "Filesystem Safe",
            description: "Never modifies your host filesystem. App data lives in isolated Docker volumes.",
          },
          {
            title: "Auto Configuration",
            description: "Automatic port mapping and smart defaults—launch apps without spending 10 minutes on setup.",
          },
          {
            title: "Always Latest Apps",
            description: "Ships the newest app releases regardless of your Yantra version—updates from source.",
          },
          {
            title: "Zero Commitment",
            description: "Install, use, and delete with no residue. Zero modification to your host system.",
          },
          {
            title: "No OS Replacement",
            description: "Lightweight app store that runs alongside your existing operating system.",
          },
          {
            title: "100% Docker Compose",
            description: "Generates standard Docker Compose files you can take anywhere. No vendor lock-in.",
          },
          {
            title: "On-Demand Resources",
            description: "Nothing runs unless you start it. Only use resources for apps you actually need.",
          },
          {
            title: "Complete AI Agent Suite",
            description: "First platform to ship isolated AI agents: Ollama, Open WebUI, Perplexica, OpenCode, and more.",
          },
          {
            title: "GPU Passthrough",
            description: "First-class support for local LLMs with GPU acceleration for Ollama and AI workloads.",
          },
          {
            title: "WebDAV Support",
            description: "Built-in WebDAV access for syncing files between volumes or machines using rclone.",
          },
          {
            title: "Single Docker Command",
            description: "Launch Yantra in seconds with one command. Access at http://localhost immediately.",
          },
          {
            title: "Isolated Containers",
            description: "No Python environment conflicts, CUDA version mismatches, or shared dependency hell.",
          },
          {
            title: "100+ App Catalog",
            description: "Curated catalog of high-quality self-hosted tools across AI, media, privacy, and more.",
          },
          {
            title: "Remote Access Ready",
            description: "Works seamlessly with Tailscale for secure remote access from anywhere.",
          },
          {
            title: "Volume Browser",
            description: "Browse and manage persistent data directly in your browser with integrated dufs server.",
          },
          {
            title: "Data Migration",
            description: "Easy backup and restore for moving volumes between machines or creating snapshots.",
          },
          {
            title: "Cross-Platform",
            description: "Runs on Linux, macOS, and Windows with Docker Desktop. Use your existing hardware.",
          },
        ];

        const featuresList = document.getElementById("features-list");

        // Helper to create feature element
        const createFeature = (feature) => {
          const div = document.createElement("div");
          div.className = "flex gap-4 items-start opacity-0 -translate-y-4 transition-all duration-1000 feature-item";
          div.innerHTML = `
                    <span class="text-gray-400 shrink-0 select-none">[*]</span>
                    <div>
                        <span class="font-bold text-black mr-2">${feature.title}</span>
                        <span class="text-gray-600">${feature.description}</span>
                    </div>
                `;

          // Trigger animation
          requestAnimationFrame(() => {
            div.classList.remove("opacity-0", "-translate-y-4");
          });

          return div;
        };

        // Initial load: 4 random features
        const DISPLAY_COUNT = 4;
        let currentFeatures = allFeatures.sort(() => 0.5 - Math.random()).slice(0, DISPLAY_COUNT);
        currentFeatures.forEach((feature, index) => {
          setTimeout(() => {
            featuresList.appendChild(createFeature(feature));
          }, index * 100); // Stagger initial load
        });

        // Periodic update
        setInterval(() => {
          if (document.hidden) return; // Pause if tab is hidden

          // Pick a random feature
          const randomFeature = allFeatures[Math.floor(Math.random() * allFeatures.length)];
          const newFeature = createFeature(randomFeature);

          // Add to front
          featuresList.prepend(newFeature);

          // Remove from back with slow fade
          if (featuresList.children.length > DISPLAY_COUNT) {
            const last = featuresList.lastElementChild;
            last.style.transition = "all 2s ease-out";
            last.classList.add("opacity-0", "scale-90");

            // Wait for transition to finish before removing
            setTimeout(() => last.remove(), 2000);
          }
        }, 4000); // Update every 4 seconds
      }

      function loadDetailedFeatures() {
        const features = [
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>`,
            title: "Zero OS Lock-in",
            desc: "Runs alongside macOS, Windows, or Linux. No custom ISOs, no formatting required."
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>`,
            title: "1-Click Deploys",
            desc: "Launch complex stacks like Ollama + Open WebUI in seconds with pre-configured templates."
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            title: "Disposable Apps",
            desc: "Set expiration timers for apps. Great for testing tools without cluttering your system."
          },
          {
             icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>`,
             title: "Isolated AI Stack",
             desc: "First-class support for AI agents. No Python conflicts, no CUDA version mismatches."
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>`,
            title: "Filesystem Safe",
            desc: "All data lives in isolated Docker volumes. Your host OS files are never touched."
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg>`,
            title: "Volume Browser",
            desc: "Manage app data directly from the browser with built-in WebDAV support."
          },
           {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>`,
            title: "S3 Backups",
            desc: "One-click backup and restore of entire volumes to any S3-compatible storage."
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            title: "GPU Passthrough",
            desc: "Automatic GPU detection and passthrough for accelerated local LLM inference."
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>`,
            title: "Auto Cleanup",
            desc: "Intelligent garbage collection removes unused images and networks to save space."
          }
        ];

        const container = document.getElementById('features-grid-container');
        if (!container) return;
        
        features.forEach((feature, index) => {
            const card = document.createElement('div');
            card.className = "group relative p-8 bg-white border border-gray-100 rounded-2xl hover:border-black transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 opacity-0 translate-y-8";
            card.innerHTML = `
                <div class="w-14 h-14 bg-gray-50 rounded-xl flex items-center justify-center mb-6 group-hover:bg-black group-hover:text-white transition-colors duration-500 group-hover:scale-110 transform">
                    ${feature.icon}
                </div>
                <h3 class="text-xl font-bold font-sans mb-3 group-hover:text-black transition-colors">${feature.title}</h3>
                <p class="text-sm text-gray-500 leading-relaxed font-sans group-hover:text-gray-700 transition-colors">${feature.desc}</p>
                <!-- Decorative element -->
                <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                    <svg class="w-4 h-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                </div>
            `;
            container.appendChild(card);

            // Staggered Animation
            setTimeout(() => {
                requestAnimationFrame(() => {
                    card.classList.remove('opacity-0', 'translate-y-8');
                });
            }, index * 100);
        });
      }

      function initScrollAnimations() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    if (entry.target.id === 'detailed-features') {
                         const header = document.getElementById('features-header');
                         if(header) header.classList.remove('opacity-0', 'translate-y-4');
                         
                         loadDetailedFeatures();
                         observer.unobserve(entry.target);
                    }
                }
            });
        }, { threshold: 0.1 });
        
        const section = document.getElementById('detailed-features');
        if (section) observer.observe(section);
      }

      function initHeroRotator() {
        const messages = [
          {
            title: "Don't buy that<br />overpriced NUC.",
            desc: "Turn your old laptop into a powerhouse homelab. Yantra runs on the hardware you already own."
          },
          {
            title: "Don't surrender<br />your OS.",
            desc: "Yantra runs alongside macOS, Windows, and Linux. No formatting, no ISOs, no taking over your computer."
          },
          {
            title: "Self-host<br />open source apps.",
            desc: "Turn any device into a private cloud. Run 100+ apps like Ollama, Open WebUI, and Perplexica on your own infrastructure."
          },
           {
            title: "Your data, your rules,<br />your hardware.",
            desc: "Stop renting cloud servers. Host your own AI, media, and files locally with zero monthly fees."
          }
        ];

        let currentIndex = 0;
        const titleEl = document.getElementById('hero-title');
        const descEl = document.getElementById('hero-desc');

        setInterval(() => {
            // Fade out
            titleEl.classList.add('opacity-0');
            descEl.classList.add('opacity-0');
            
            setTimeout(() => {
                currentIndex = (currentIndex + 1) % messages.length;
                titleEl.innerHTML = messages[currentIndex].title;
                descEl.textContent = messages[currentIndex].desc;
                
                // Fade in
                titleEl.classList.remove('opacity-0');
                descEl.classList.remove('opacity-0');
            }, 500); // Wait for fade out
            
        }, 5000); // Rotate every 5 seconds
      }

      function loadRandomScreenshot() {
        const screenshots = [
            { url: "https://github.com/user-attachments/assets/2e107ef8-2411-4d62-9886-9fb917b9993d", caption: "Main Dashboard - Clean, modern interface for managing your apps" },
            { url: "https://github.com/user-attachments/assets/3a9604fa-d634-4329-aa73-ed4658145b00", caption: "Temporary Installation - Set auto-expiry for apps to keep your system clean" },
            { url: "https://github.com/user-attachments/assets/862fb852-e52d-4f94-8372-234c1d6c6b51", caption: "Volume Browser - Browse and manage persistent data files directly" },
            { url: "https://github.com/user-attachments/assets/e5dc0ad8-0181-4676-b7b1-1cc961a6b1ed", caption: "Dark Mode - Fully supported dark theme for late night hacking" }
        ];

        const random = screenshots[Math.floor(Math.random() * screenshots.length)];
        const img = document.getElementById('screenshot-img');
        const caption = document.getElementById('screenshot-caption');
        const loader = document.getElementById('screenshot-loader');
        
        if (img && caption) {
            // Preload image
            const tempImg = new Image();
            tempImg.onload = () => {
                 img.src = random.url;
                 caption.textContent = random.caption;
                 img.classList.remove('opacity-0');
                 if(loader) loader.classList.add('hidden');
            };
            tempImg.src = random.url;
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadApps();
        loadStars();
        animateFeatures();
        initScrollAnimations();
        initHeroRotator();
        loadRandomScreenshot();
      });
    </script>
  </body>
</html>
