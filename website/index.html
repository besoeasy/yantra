<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yantr — The Open Source Homelab Control Plane</title>
    <meta
      name="description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta name="theme-color" content="#ffffff" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yantr.org/" />
    <meta property="og:title" content="Yantr — The Open Source Homelab Control Plane" />
    <meta
      property="og:description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta property="og:image" content="https://yantr.org/yantr.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://yantr.org/" />
    <meta property="twitter:title" content="Yantr — The Open Source Homelab Control Plane" />
    <meta
      property="twitter:description"
      content="Turn any device into a self-hosted homelab. Run 100+ apps like Ollama, Open WebUI, and more on your own infrastructure."
    />
    <meta property="twitter:image" content="https://yantr.org/yantr.png" />

    <!-- Local Tailwind CSS bundle -->
    <link rel="stylesheet" href="./tailwind.css" />
    <style>
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .bg-grid-pattern {
        background-color: #ffffff;
        background-image: linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px);
        background-size: 20px 20px;
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.5);
      }
      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.1;
          transform: scale(0.8);
        }
        50% {
          opacity: 0.4;
          transform: scale(1.1);
        }
      }
      .star-icon {
        position: absolute;
        animation: twinkle 4s infinite ease-in-out;
        opacity: 0.1;
        filter: grayscale(100%);
        transition: all 0.3s;
        pointer-events: auto; /* Enable hover */
      }
      .star-icon:hover {
        opacity: 1 !important;
        filter: grayscale(0%);
        transform: scale(1.1) !important; /* Temporarily pause animation or override transform */
        z-index: 20;
        animation-play-state: paused;
        background: rgba(255, 255, 255, 0.9);
        box-shadow:
          0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-up {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0; /* Start hidden */
      }
      .delay-100 {
        animation-delay: 100ms;
      }
      .delay-200 {
        animation-delay: 200ms;
      }
      .delay-300 {
        animation-delay: 300ms;
      }
      @keyframes slideInSoft {
        from {
          opacity: 0;
          transform: translateY(14px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes pulseGlow {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.06);
        }
        50% {
          box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
        }
      }
      @keyframes floatY {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-4px);
        }
      }
      .animate-slide-in-soft {
        animation: slideInSoft 700ms ease-out forwards;
      }
      .animate-pulse-glow {
        animation: pulseGlow 2.6s ease-in-out infinite;
      }
      .animate-float-y {
        animation: floatY 3.2s ease-in-out infinite;
      }
      #copy-install.copied .copy-icon {
        display: none;
      }
      #copy-install.copied .check-icon {
        display: block;
      }
      @keyframes marquee-left {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-50%);
        }
      }
      @keyframes marquee-right {
        0% {
          transform: translateX(-50%);
        }
        100% {
          transform: translateX(0);
        }
      }
      .app-marquee-track {
        width: max-content;
        will-change: transform;
      }
      .app-marquee-left {
        animation: marquee-left 200s linear infinite;
      }
      .app-marquee-right {
        animation: marquee-right 200s linear infinite;
      }
      .app-description-clamp {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    </style>
  </head>
  <body class="bg-white text-black font-mono antialiased selection:bg-black selection:text-white relative">
    <div class="absolute inset-0 -z-10 bg-grid-pattern [mask-image:linear-gradient(to_bottom,white,transparent)] h-[900px] pointer-events-none"></div>

    <!-- Full-page Background Animation Container -->
    <div id="hero-stars" class="absolute top-0 left-0 w-full overflow-hidden -z-10 pointer-events-none" style="height: 100%"></div>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 pt-8 sm:pt-12 pb-24 relative bg-white">
      <!-- Hero -->
      <div class="mb-16 sm:mb-32 flex flex-col items-center text-center relative z-10">
        <div class="max-w-4xl mx-auto">
          <a
            href="./install-docker/"
            class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/80 backdrop-blur px-3 py-1.5 mb-6 text-xs font-semibold tracking-wide text-gray-600 uppercase animate-fade-in-up hover:border-gray-400 transition-colors"
          >
            <span class="h-2 w-2 rounded-full bg-emerald-500 animate-pulse"></span>
            Docker-native self-hosting
          </a>
          <h1
            id="hero-title"
            class="text-3xl sm:text-5xl lg:text-7xl font-bold tracking-tight mb-6 font-sans text-black leading-tight sm:leading-[0.95] transition-opacity duration-500 ease-in-out animate-fade-in-up delay-100"
          >
            Self-host open source apps.
          </h1>
          <p
            id="hero-desc"
            class="text-lg sm:text-xl text-gray-500 leading-relaxed max-w-2xl mx-auto mb-10 font-sans transition-opacity duration-500 ease-in-out animate-fade-in-up delay-200"
          >
            Turn any device into a private cloud with one command. Run 100+ apps — Ollama, Nextcloud, Jellyfin, and more — fully isolated on your own hardware.
          </p>

          <div class="flex flex-wrap items-center justify-center gap-3 mb-10 animate-fade-in-up delay-300">
            <a
              href="https://github.com/besoeasy/yantr"
              target="_blank"
              class="flex items-center gap-2 bg-black text-white px-4 py-2 text-sm font-bold hover:bg-gray-800 transition-colors"
            >
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  fill-rule="evenodd"
                  d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                  clip-rule="evenodd"
                />
              </svg>
              Star on GitHub <span class="text-gray-400 font-normal" id="stars-nav"></span>
            </a>
            <a
              href="https://t.me/+h4RvCk63PxUyODQ1"
              target="_blank"
              class="flex items-center gap-2 border border-gray-200 text-gray-700 px-4 py-2 text-sm font-bold hover:bg-gray-50 transition-colors"
            >
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"
                />
              </svg>
              Telegram
            </a>
          </div>

          <!-- Install Widget -->
          <div class="max-w-2xl mx-auto text-left animate-fade-in-up">
            <div class="rounded-xl border border-zinc-800 bg-zinc-950 p-5">
              <div class="flex items-start justify-between gap-4">
                <code id="install-cmd" class="block text-xs sm:text-sm text-zinc-200 font-mono whitespace-pre-wrap break-all leading-relaxed flex-1"
                  >docker run -d --name yantr -p 80:5252 -p 443:5252 \ -v /var/run/docker.sock:/var/run/docker.sock \ --restart unless-stopped
                  ghcr.io/besoeasy/yantr</code
                >
                <button
                  id="copy-install"
                  onclick="
                    navigator.clipboard
                      .writeText(
                        'docker run -d --name yantr -p 80:5252 -p 443:5252 -v /var/run/docker.sock:/var/run/docker.sock --restart unless-stopped ghcr.io/besoeasy/yantr',
                      )
                      .then(() => {
                        const b = document.getElementById('copy-install');
                        b.classList.add('copied');
                        setTimeout(() => b.classList.remove('copied'), 2000);
                      })
                  "
                  class="text-zinc-500 hover:text-white transition-colors p-1.5 rounded hover:bg-white/10 shrink-0 self-start"
                  title="Copy"
                >
                  <svg class="copy-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    ></path>
                  </svg>
                  <svg class="check-icon w-5 h-5 hidden text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                </button>
              </div>
            </div>
            <p class="mt-3 text-xs text-gray-400 text-center">
              Requires Docker &middot;
              <a href="./install-docker/" class="underline hover:text-gray-600 transition-colors">Install guide →</a>
            </p>
          </div>
        </div>
      </div>

      <!-- Full-width App Showcase -->
      <div id="hero-apps-showcase" class="relative left-1/2 right-1/2 w-screen -translate-x-1/2 py-8 sm:py-10 border-y border-gray-100 bg-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 mb-5 sm:mb-6">
        </div>

        <div class="space-y-3 sm:space-y-4">
          <div class="overflow-hidden py-1.5 sm:py-2">
            <div class="flex items-center gap-3 px-3 sm:px-4 app-marquee-track app-marquee-left" id="hero-app-marquee-1"></div>
          </div>
          <div class="overflow-hidden py-1.5 sm:py-2">
            <div class="flex items-center gap-3 px-3 sm:px-4 app-marquee-track app-marquee-right" id="hero-app-marquee-2"></div>
          </div>
        </div>

        <div class="max-w-6xl mx-auto px-4 sm:px-6 mt-6 sm:mt-8 flex justify-center">
          <a
            href="./catalog/"
            class="inline-flex items-center gap-2 rounded-xl border border-black bg-black text-white px-5 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-semibold hover:bg-white hover:text-black transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5"
          >
            Open catalog
            <span aria-hidden="true">→</span>
          </a>
        </div>
      </div>

      <!-- Features Section -->
      <div class="max-w-4xl pt-8 sm:pt-12" id="features">
        <h2 class="text-2xl font-bold font-sans mb-6">Features</h2>
        <p class="text-gray-600 mb-10 max-w-2xl font-sans">
          Yantr is an open source control plane that helps you manage self-hosted applications on your server, laptop, or cloud instance.
        </p>

        <div class="space-y-6 font-mono text-sm sm:text-base" id="features-list">
          <!-- Features loaded via JS -->
        </div>
      </div>

      <!-- Screenshot Section -->
      <div class="pt-8 pb-12 sm:pt-12 sm:pb-20 border-t border-gray-100" id="screenshots">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
          <div class="text-center mb-12">
            <h2 class="text-3xl font-bold font-sans mb-4 tracking-tight">See it in action</h2>
          </div>
          <div class="rounded-xl overflow-hidden shadow-2xl border border-gray-200 bg-gray-100 relative group">
            <div class="absolute inset-0 bg-gray-200 animate-pulse" id="screenshot-loader"></div>
            <img id="screenshot-img" src="" alt="Yantr Interface" class="w-full h-auto opacity-0 transition-opacity duration-700 relative z-10" />
            <div
              class="absolute bottom-0 left-0 right-0 p-4 bg-white/90 backdrop-blur border-t border-gray-200 translate-y-full group-hover:translate-y-0 transition-transform duration-300 z-20"
            >
              <p id="screenshot-caption" class="text-sm font-medium text-black font-mono text-center"></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contributors Section -->
      <div class="py-12 sm:py-20 border-t border-gray-100" id="contributors">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
          <div class="text-center mb-10">
            <h2 class="text-3xl font-bold font-sans mb-3 tracking-tight">Built by open source contributors</h2>
            <p class="text-gray-500 font-sans">A random selection from the Yantr GitHub community.</p>
          </div>

          <div id="contributors-grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-5"></div>
        </div>
      </div>
    </main>

    <script>
      function getRandomUniqueItems(items, count) {
        if (!Array.isArray(items) || items.length === 0 || count <= 0) return [];

        const shuffled = [...items];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }

        return shuffled.slice(0, Math.min(count, shuffled.length));
      }

      function getLogoUrl(app) {
        return app.logo
          ? app.logo.startsWith("http")
            ? app.logo
            : `https://ipfs.io/ipfs/${app.logo}`
          : `https://ui-avatars.com/api/?name=${encodeURIComponent(app.name)}&background=random&color=fff&bold=true`;
      }

      function createAppPillMarkup(app) {
        const logoUrl = getLogoUrl(app);
        return `
          <a href="./apps/${app.id}/" class="group relative inline-flex items-start gap-3 border border-gray-100 bg-white rounded-2xl px-4 py-3 sm:px-5 sm:py-4 hover:border-black transition-all duration-500 hover:shadow-xl hover:-translate-y-1 min-w-[240px] max-w-[280px] sm:min-w-[300px] sm:max-w-[360px] lg:min-w-[380px] lg:max-w-[460px]">
            <img src="${logoUrl}" alt="${app.name}" class="w-12 h-12 rounded-xl object-cover shrink-0 border border-gray-100" />
            <span class="min-w-0 leading-tight">
              <span class="block text-base font-bold font-sans text-gray-900 truncate">${app.name}</span>
              <span class="block text-sm leading-5 font-sans text-gray-500 mt-1 app-description-clamp">${app.description || "No description available."}</span>
            </span>
          </a>
        `;
      }

      async function loadHeroAppShowcase() {
        try {
          const response = await fetch("./apps.json");
          const data = await response.json();
          const apps = data.apps;
          if (!apps || apps.length === 0) return;

          const rowOne = document.getElementById("hero-app-marquee-1");
          const rowTwo = document.getElementById("hero-app-marquee-2");
          if (!rowOne || !rowTwo) return;

          const shuffled = [...apps];
          for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }

          const rows = [[], []];
          shuffled.forEach((app, index) => {
            rows[index % 2].push(app);
          });

          const renderMarqueeRow = (element, list) => {
            if (!list.length) return;
            const singleSet = list.map((app) => createAppPillMarkup(app)).join("");
            element.innerHTML = singleSet + singleSet;
          };

          renderMarqueeRow(rowOne, rows[0]);
          renderMarqueeRow(rowTwo, rows[1]);
        } catch (error) {
          console.error("Failed to load hero app showcase:", error);
        }
      }

      async function loadStars() {
        try {
          const response = await fetch("https://api.github.com/repos/besoeasy/yantr");
          if (response.ok) {
            const data = await response.json();
            const stars = data.stargazers_count;
            const formatted = stars > 1000 ? (stars / 1000).toFixed(1) + "k" : stars;
            document.getElementById("stars-nav").textContent = formatted;
          }
        } catch (e) {
          document.getElementById("stars-nav").textContent = "";
        }
      }

      async function loadContributors() {
        const grid = document.getElementById("contributors-grid");
        if (!grid) return;

        try {
          const response = await fetch("https://api.github.com/repos/besoeasy/yantr/contributors?per_page=100");
          if (!response.ok) return;

          const contributors = await response.json();
          if (!Array.isArray(contributors) || contributors.length === 0) return;

          const humans = contributors.filter((contributor) => contributor?.type === "User" && contributor?.login && !contributor.login.endsWith("[bot]"));
          if (humans.length === 0) return;

          const randomContributors = getRandomUniqueItems(humans, 8);
          grid.innerHTML = "";

          randomContributors.forEach((contributor, index) => {
            const card = document.createElement("a");
            card.href = contributor.html_url;
            card.target = "_blank";
            card.rel = "noopener noreferrer";
            card.className =
              "group border border-gray-200 bg-white p-4 rounded-xl hover:border-black hover:shadow-lg transition-all duration-300 opacity-0 translate-y-3";

            const contributionLabel = contributor.contributions === 1 ? "contribution" : "contributions";
            card.innerHTML = `
              <div class="flex items-center gap-3">
                <img src="${contributor.avatar_url}" alt="${contributor.login}" class="w-10 h-10 rounded-full border border-gray-200 object-cover" loading="lazy" />
                <div class="min-w-0">
                  <p class="text-sm font-bold truncate">@${contributor.login}</p>
                  <p class="text-xs text-gray-500">${contributor.contributions} ${contributionLabel}</p>
                </div>
              </div>
            `;

            grid.appendChild(card);

            setTimeout(() => {
              card.classList.remove("opacity-0", "translate-y-3");
            }, index * 60);
          });
        } catch (error) {
          console.error("Failed to load contributors:", error);
        }
      }

      function animateFeatures() {
        const allFeatures = [
          {
            title: "Docker Native",
            description: "Runs alongside your OS. No custom ISO or system takeover required.",
          },
          {
            title: "One-Click Deploys",
            description: "Instant access to popular self-hosted apps with clean defaults and smart presets.",
          },
          {
            title: "Temporary Installations",
            description: "Set expiration times and auto-delete apps when you're done testing.",
          },
          {
            title: "Multiple Instances",
            description: "Run the same app multiple times with different configurations.",
          },
          {
            title: "Direct Volume Access",
            description: "Browse and manage app data files directly from the UI with built-in file browser.",
          },
          {
            title: "Volume Backup & Restore",
            description: "Backup and restore Docker volumes to S3/MinIO with a single click for easy data migration.",
          },
          {
            title: "Auto-Cleanup",
            description: "Automatically removes old unused Docker images (10+ days) to free disk space.",
          },
          {
            title: "Premium UI",
            description: "Modern Vue.js interface that feels fast and polished with dark mode support.",
          },
          {
            title: "Filesystem Safe",
            description: "Never modifies your host filesystem. App data lives in isolated Docker volumes.",
          },
          {
            title: "Auto Configuration",
            description: "Automatic port mapping and smart defaults—launch apps without spending 10 minutes on setup.",
          },
          {
            title: "Always Latest Apps",
            description: "Ships the newest app releases regardless of your Yantr version—updates from source.",
          },
          {
            title: "Zero Commitment",
            description: "Install, use, and delete with no residue. Zero modification to your host system.",
          },
          {
            title: "No OS Replacement",
            description: "Lightweight app store that runs alongside your existing operating system.",
          },
          {
            title: "100% Docker Compose",
            description: "Generates standard Docker Compose files you can take anywhere. No vendor lock-in.",
          },
          {
            title: "On-Demand Resources",
            description: "Nothing runs unless you start it. Only use resources for apps you actually need.",
          },
          {
            title: "Complete AI Agent Suite",
            description: "First platform to ship isolated AI agents: Ollama, Open WebUI, Perplexica, OpenCode, and more.",
          },
          {
            title: "GPU Passthrough",
            description: "First-class support for local LLMs with GPU acceleration for Ollama and AI workloads.",
          },
          {
            title: "WebDAV Support",
            description: "Built-in WebDAV access for syncing files between volumes or machines using rclone.",
          },
          {
            title: "Single Docker Command",
            description: "Launch Yantr in seconds with one command. Access at http://localhost immediately.",
          },
          {
            title: "Isolated Containers",
            description: "No Python environment conflicts, CUDA version mismatches, or shared dependency hell.",
          },
          {
            title: "100+ App Catalog",
            description: "Curated catalog of high-quality self-hosted tools across AI, media, privacy, and more.",
          },
          {
            title: "Remote Access Ready",
            description: "Works seamlessly with Tailscale for secure remote access from anywhere.",
          },
          {
            title: "Volume Browser",
            description: "Browse and manage persistent data directly in your browser with integrated dufs server.",
          },
          {
            title: "Data Migration",
            description: "Easy backup and restore for moving volumes between machines or creating snapshots.",
          },
          {
            title: "Cross-Platform",
            description: "Runs on Linux, macOS, and Windows with Docker Desktop. Use your existing hardware.",
          },
        ];

        const featuresList = document.getElementById("features-list");

        // Helper to create feature element
        const createFeature = (feature) => {
          const div = document.createElement("div");
          div.className = "flex gap-4 items-start opacity-0 -translate-y-4 transition-all duration-1000 feature-item";
          div.innerHTML = `
                    <span class="text-gray-400 shrink-0 select-none">[*]</span>
                    <div>
                        <span class="font-bold text-black mr-2">${feature.title}</span>
                        <span class="text-gray-600">${feature.description}</span>
                    </div>
                `;

          // Trigger animation
          requestAnimationFrame(() => {
            div.classList.remove("opacity-0", "-translate-y-4");
          });

          return div;
        };

        // Initial load: 4 random features
        const DISPLAY_COUNT = 4;
        let currentFeatures = allFeatures.sort(() => 0.5 - Math.random()).slice(0, DISPLAY_COUNT);
        currentFeatures.forEach((feature, index) => {
          setTimeout(() => {
            featuresList.appendChild(createFeature(feature));
          }, index * 100); // Stagger initial load
        });

        // Periodic update
        setInterval(() => {
          if (document.hidden) return; // Pause if tab is hidden

          // Pick a random feature
          const randomFeature = allFeatures[Math.floor(Math.random() * allFeatures.length)];
          const newFeature = createFeature(randomFeature);

          // Add to front
          featuresList.prepend(newFeature);

          // Remove from back with slow fade
          if (featuresList.children.length > DISPLAY_COUNT) {
            const last = featuresList.lastElementChild;
            last.style.transition = "all 2s ease-out";
            last.classList.add("opacity-0", "scale-90");

            // Wait for transition to finish before removing
            setTimeout(() => last.remove(), 2000);
          }
        }, 4000); // Update every 4 seconds
      }

      function loadDetailedFeatures() {
        const features = [
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>`,
            title: "Zero OS Lock-in",
            desc: "Runs alongside macOS, Windows, or Linux. No custom ISOs, no formatting required.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>`,
            title: "1-Click Deploys",
            desc: "Launch complex stacks like Ollama + Open WebUI in seconds with pre-configured templates.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            title: "Disposable Apps",
            desc: "Set expiration timers for apps. Great for testing tools without cluttering your system.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>`,
            title: "Isolated AI Stack",
            desc: "First-class support for AI agents. No Python conflicts, no CUDA version mismatches.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>`,
            title: "Filesystem Safe",
            desc: "All data lives in isolated Docker volumes. Your host OS files are never touched.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg>`,
            title: "Volume Browser",
            desc: "Manage app data directly from the browser with built-in WebDAV support.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>`,
            title: "S3 Backups",
            desc: "One-click backup and restore of entire volumes to any S3-compatible storage.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            title: "GPU Passthrough",
            desc: "Automatic GPU detection and passthrough for accelerated local LLM inference.",
          },
          {
            icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>`,
            title: "Auto Cleanup",
            desc: "Intelligent garbage collection removes unused images and networks to save space.",
          },
        ];

        const container = document.getElementById("features-grid-container");
        if (!container) return;

        features.forEach((feature, index) => {
          const card = document.createElement("div");
          card.className =
            "group relative p-8 bg-white border border-gray-100 rounded-2xl hover:border-black transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 opacity-0 translate-y-8";
          card.innerHTML = `
                <div class="w-14 h-14 bg-gray-50 rounded-xl flex items-center justify-center mb-6 group-hover:bg-black group-hover:text-white transition-colors duration-500 group-hover:scale-110 transform">
                    ${feature.icon}
                </div>
                <h3 class="text-xl font-bold font-sans mb-3 group-hover:text-black transition-colors">${feature.title}</h3>
                <p class="text-sm text-gray-500 leading-relaxed font-sans group-hover:text-gray-700 transition-colors">${feature.desc}</p>
                <!-- Decorative element -->
                <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                    <svg class="w-4 h-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                </div>
            `;
          container.appendChild(card);

          // Staggered Animation
          setTimeout(() => {
            requestAnimationFrame(() => {
              card.classList.remove("opacity-0", "translate-y-8");
            });
          }, index * 100);
        });
      }

      function initScrollAnimations() {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                if (entry.target.id === "detailed-features") {
                  const header = document.getElementById("features-header");
                  if (header) header.classList.remove("opacity-0", "translate-y-4");

                  loadDetailedFeatures();
                  observer.unobserve(entry.target);
                }
              }
            });
          },
          { threshold: 0.1 },
        );

        const section = document.getElementById("detailed-features");
        if (section) observer.observe(section);
      }

      function initHeroRotator() {
        const messages = [
          {
            title: "Don't buy that<br />overpriced NUC.",
            desc: "Turn your old laptop into a powerhouse homelab. Yantr runs on the hardware you already own.",
          },
          {
            title: "Don't surrender<br />your OS.",
            desc: "Yantr runs alongside macOS, Windows, and Linux. No formatting, no ISOs, no taking over your computer.",
          },
          {
            title: "Self-host<br />open source apps.",
            desc: "Turn any device into a private cloud. Run 100+ apps like Ollama, Open WebUI, and Perplexica on your own infrastructure.",
          },
          {
            title: "Your data, your rules,<br />your hardware.",
            desc: "Stop renting cloud servers. Host your own AI, media, and files locally with zero monthly fees.",
          },
        ];

        let currentIndex = 0;
        const titleEl = document.getElementById("hero-title");
        const descEl = document.getElementById("hero-desc");

        setInterval(() => {
          // Fade out
          titleEl.classList.add("opacity-0");
          descEl.classList.add("opacity-0");

          setTimeout(() => {
            currentIndex = (currentIndex + 1) % messages.length;
            titleEl.innerHTML = messages[currentIndex].title;
            descEl.textContent = messages[currentIndex].desc;

            // Fade in
            titleEl.classList.remove("opacity-0");
            descEl.classList.remove("opacity-0");
          }, 500); // Wait for fade out
        }, 5000); // Rotate every 5 seconds
      }

      function loadRandomScreenshot() {
        const gifs = [
          {
            url: "https://github.com/user-attachments/assets/2e107ef8-2411-4d62-9886-9fb917b9993d",
            caption: "Main Dashboard - Clean, modern interface for managing your apps",
          },
          {
            url: "https://github.com/user-attachments/assets/3a9604fa-d634-4329-aa73-ed4658145b00",
            caption: "Temporary Installation - Set auto-expiry for apps to keep your system clean",
          },
          {
            url: "https://github.com/user-attachments/assets/862fb852-e52d-4f94-8372-234c1d6c6b51",
            caption: "Volume Browser - Browse and manage persistent data files directly",
          },
          {
            url: "https://github.com/user-attachments/assets/e5dc0ad8-0181-4676-b7b1-1cc961a6b1ed",
            caption: "Dark Mode - Fully supported dark theme for late night hacking",
          },
        ];

        const img = document.getElementById("screenshot-img");
        const caption = document.getElementById("screenshot-caption");
        const loader = document.getElementById("screenshot-loader");
        if (!img || !caption || gifs.length === 0) return;

        const ROTATION_MS = 60000;
        let currentIndex = -1;

        const showNextGif = () => {
          let nextIndex = Math.floor(Math.random() * gifs.length);
          if (gifs.length > 1) {
            while (nextIndex === currentIndex) {
              nextIndex = Math.floor(Math.random() * gifs.length);
            }
          }

          currentIndex = nextIndex;
          const nextGif = gifs[currentIndex];

          if (loader) loader.classList.remove("hidden");
          img.classList.add("opacity-0");

          const tempImg = new Image();
          tempImg.onload = () => {
            img.src = nextGif.url;
            caption.textContent = nextGif.caption;
            if (loader) loader.classList.add("hidden");
            requestAnimationFrame(() => {
              img.classList.remove("opacity-0");
            });
          };
          tempImg.src = nextGif.url;
        };

        showNextGif();
        setInterval(() => {
          if (document.hidden) return;
          showNextGif();
        }, ROTATION_MS);
      }

      async function initHeroAnimation() {
        const container = document.getElementById("hero-stars");
        if (!container) return;

        try {
          const response = await fetch("./apps.json");
          const data = await response.json();
          const apps = data.apps;
          if (!apps || !apps.length) return;

          const starCount = 60;
          const appsWithLogo = apps.filter((app) => app.logo);
          const selectedApps = getRandomUniqueItems(appsWithLogo, starCount);

          // Match container height to full document height
          const docHeight = document.documentElement.scrollHeight;
          container.style.height = docHeight + "px";

          for (const app of selectedApps) {
            const logoUrl = app.logo ? getLogoUrl(app) : null;
            if (!logoUrl) continue;

            const el = document.createElement("div");
            el.className = "star-icon absolute flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/40 backdrop-blur-md shadow-sm border border-white/20";

            // Spread icons across full document width and height
            el.style.left = Math.floor(Math.random() * 88) + 2 + "%";
            el.style.top = Math.floor(Math.random() * docHeight) + "px";

            const size = Math.floor(Math.random() * 8) + 16; // 16px - 24px icon size

            el.style.animationDelay = Math.random() * 5 + "s";
            el.style.animationDuration = Math.random() * 3 + 3 + "s";
            el.innerHTML = `
              <img src="${logoUrl}" style="width:${size}px; height:${size}px;" class="object-contain shrink-0" alt="${app.name}">
              <span class="text-xs font-semibold text-gray-700 whitespace-nowrap">${app.name}</span>
            `;

            container.appendChild(el);
          }
        } catch (e) {
          console.error("Hero animation failed:", e);
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadHeroAppShowcase();
        loadStars();
        loadContributors();
        animateFeatures();
        initScrollAnimations();
        initHeroRotator();
        loadRandomScreenshot();
        initHeroAnimation();

        // Cleanup entrance animations on rotator elements to allow transitions to work later
        setTimeout(() => {
          const title = document.getElementById("hero-title");
          const desc = document.getElementById("hero-desc");
          if (title) {
            title.classList.remove("animate-fade-in-up", "delay-100", "opacity-0");
            title.style.opacity = ""; // Ensure it stays visible
          }
          if (desc) {
            desc.classList.remove("animate-fade-in-up", "delay-200", "opacity-0");
            desc.style.opacity = "";
          }
        }, 1500);
      });
    </script>
  </body>
</html>
