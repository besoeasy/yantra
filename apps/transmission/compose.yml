services:
  transmission:
    image: linuxserver/transmission:latest
    container_name: transmission
    environment:
      - USER=${TRANSMISSION_USER:-admin}
      - PASS=${TRANSMISSION_PASS:-admin}
    volumes:
      - transmission_config:/config
      - transmission_downloads:/downloads
    ports:
      - "9091:9091"
      - "51413:51413"
      - "51413:51413/udp"
    restart: unless-stopped
    labels:
      yantra.name: "Transmission"
      yantra.logo: "QmdV4D5GK3rSbCRaz5RCN7ebDVnhSnTb9SNuvbJnZKVxDb"
      yantra.category: "download,network"
      yantra.port: "9091 (HTTP - Web Interface), 9092 (HTTP - Downloads)"
      yantra.description: "Fast, easy BitTorrent client with web interface"
      yantra.website: "https://transmissionbt.com/"
      yantra.github: "https://github.com/transmission/transmission"

  transmission-http:
    image: nginx:alpine
    container_name: transmission-http
    volumes:
      - transmission_downloads:/usr/share/nginx/html:ro
      - transmission_nginx_conf:/etc/nginx/conf.d
    ports:
      - "9092:80"
    restart: unless-stopped
    command: /bin/sh -c "echo 'server { listen 80; location / { root /usr/share/nginx/html; autoindex on; autoindex_exact_size off; autoindex_localtime on; } }' > /etc/nginx/conf.d/default.conf && nginx -g 'daemon off;'"

volumes:
  transmission_config:
    name: transmission_config
  transmission_downloads:
    name: transmission_downloads
  transmission_nginx_conf:
    name: transmission_nginx_conf
